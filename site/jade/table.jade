extends page

block add_links
  link(rel="stylesheet", href="/css/sortable-theme-bootstrap.css")

block content
  h1 Таблица задач

  table(data-sortable data-sortable-initialized="false").table.table-stripped.sortable-theme-bootstrap
    thead
      tr
        th #
        th(data-sorted="true" data-sorted-direction="ascending") Название задачи
        th(data-sorted="false") Максимальный балл
        th(data-sorted="false") Средний балл за все года
        th(data-sorted="false") Средний процент
        th(data-sorted="false") Количество сдавших
        th(data-sorted="false") Количество сдавших на полный балл
    tbody
      - var number = 1
      each task in locals
        tr
          th(scope='row') #{number}
          td: a(href="/tasks/#{task.name}.html") #{task.name}
          td #{task.max}
          td #{task.average}
          td #{task.average_percent}
          td #{task.students_amount}
          td #{task.students_all_points}
          - number += 1
  p: i Дисклеймер
  p Так как максимальный балл может меняться в зависимости от года, в данной таблице средний балл рассчитан как средний процент выполнения задачи, умноженный на максимальный балл текущего года
  p Средний процент рассчитывается как балл студента разделенный на максимальный балл года сдачи

block add_scripts
  script(src='/js/sortable.min.js')
